"use strict";(self.webpackChunkblog=self.webpackChunkblog||[]).push([[1869],{3905:function(e,n,t){t.d(n,{Zo:function(){return s},kt:function(){return c}});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function l(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?l(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):l(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},l=Object.keys(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(r=0;r<l.length;r++)t=l[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var p=r.createContext({}),u=function(e){var n=r.useContext(p),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},s=function(e){var n=u(e.components);return r.createElement(p.Provider,{value:n},e.children)},f={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,l=e.originalType,p=e.parentName,s=i(e,["components","mdxType","originalType","parentName"]),m=u(t),c=a,d=m["".concat(p,".").concat(c)]||m[c]||f[c]||l;return t?r.createElement(d,o(o({ref:n},s),{},{components:t})):r.createElement(d,o({ref:n},s))}));function c(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var l=t.length,o=new Array(l);o[0]=m;var i={};for(var p in n)hasOwnProperty.call(n,p)&&(i[p]=n[p]);i.originalType=e,i.mdxType="string"==typeof e?e:a,o[1]=i;for(var u=2;u<l;u++)o[u]=t[u];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},6933:function(e,n,t){t.r(n),t.d(n,{assets:function(){return s},contentTitle:function(){return p},default:function(){return c},frontMatter:function(){return i},metadata:function(){return u},toc:function(){return f}});var r=t(3117),a=t(102),l=(t(7294),t(3905)),o=["components"],i={},p="Refs",u={unversionedId:"You-Dont-Know-React/Refs f35f2",id:"You-Dont-Know-React/Refs f35f2",title:"Refs",description:"\u4f7f\u7528 DOM \u8282\u70b9\u6216 render \u65b9\u6cd5\u4e2d\u521b\u5efa\u7684 React \u5143\u7d20",source:"@site/docs/You-Dont-Know-React/Refs f35f2.md",sourceDirName:"You-Dont-Know-React",slug:"/You-Dont-Know-React/Refs f35f2",permalink:"/docs/You-Dont-Know-React/Refs f35f2",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"React \u7f16\u7a0b\u601d\u8003",permalink:"/docs/You-Dont-Know-React/React \u7f16\u7a0b\u601d\u8003 a59ce"},next:{title:"Render Props",permalink:"/docs/You-Dont-Know-React/Render Pro 631f5"}},s={},f=[{value:"\u4f55\u65f6\u4f7f\u7528 Refs",id:"\u4f55\u65f6\u4f7f\u7528-refs",level:3},{value:"\u6ce8\u610f",id:"\u6ce8\u610f",level:3},{value:"<strong>\u521b\u5efa Refs</strong>",id:"\u521b\u5efa-refs",level:3},{value:"<strong>\u8bbf\u95ee Refs</strong>",id:"\u8bbf\u95ee-refs",level:3},{value:"<strong>\u5b50\u7ec4\u4ef6 DOM Refs \u66b4\u9732\u7ed9\u7236\u7ec4\u4ef6</strong>",id:"\u5b50\u7ec4\u4ef6-dom-refs-\u66b4\u9732\u7ed9\u7236\u7ec4\u4ef6",level:3},{value:"\u56de\u8c03 Refs",id:"\u56de\u8c03-refs",level:3}],m={toc:f};function c(e){var n=e.components,t=(0,a.Z)(e,o);return(0,l.kt)("wrapper",(0,r.Z)({},m,t,{components:n,mdxType:"MDXLayout"}),(0,l.kt)("h1",{id:"refs"},"Refs"),(0,l.kt)("p",null,"\u4f7f\u7528 DOM \u8282\u70b9\u6216 render \u65b9\u6cd5\u4e2d\u521b\u5efa\u7684 React \u5143\u7d20"),(0,l.kt)("h3",{id:"\u4f55\u65f6\u4f7f\u7528-refs"},"\u4f55\u65f6\u4f7f\u7528 Refs"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u7ba1\u7406\u7126\u70b9\uff0c\u6587\u672c\u9009\u62e9\u6216\u5a92\u4f53\u64ad\u653e"),(0,l.kt)("li",{parentName:"ul"},"\u89e6\u53d1\u5f3a\u5236\u52a8\u753b"),(0,l.kt)("li",{parentName:"ul"},"\u96c6\u6210\u7b2c\u4e09\u65b9 DOM \u5e93")),(0,l.kt)("h3",{id:"\u6ce8\u610f"},"\u6ce8\u610f"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u907f\u514d\u4f7f\u7528 refs \u6765\u505a\u4efb\u4f55\u53ef\u4ee5\u901a\u8fc7\u58f0\u660e\u5f0f\u5b9e\u73b0\u6765\u5b8c\u6210\u7684\u4e8b\u60c5"),(0,l.kt)("li",{parentName:"ul"},"\u52ff\u8fc7\u5ea6\u4f7f\u7528 Refs\u5c3d\u91cf\u4f7f\u7528state\u63d0\u5347")),(0,l.kt)("h3",{id:"\u521b\u5efa-refs"},(0,l.kt)("strong",{parentName:"h3"},"\u521b\u5efa Refs")),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"React.createRef()"),", ",(0,l.kt)("inlineCode",{parentName:"li"},"useRef")," \u521b\u5efa ",(0,l.kt)("inlineCode",{parentName:"li"},"Refs")),(0,l.kt)("li",{parentName:"ul"},"\u5c06 ",(0,l.kt)("inlineCode",{parentName:"li"},"Refs")," \u5206\u914d\u7ed9\u5b9e\u4f8b\u5c5e\u6027"),(0,l.kt)("li",{parentName:"ul"},"\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"ref")," \u5c5e\u6027\u9644\u52a0\u5230 React \u5143\u7d20"),(0,l.kt)("li",{parentName:"ul"},"\u6574\u4e2a\u7ec4\u4ef6\u58f0\u660e\u5468\u671f\u5185\u4f7f\u7528\u5b83\u4eec")),(0,l.kt)("h3",{id:"\u8bbf\u95ee-refs"},(0,l.kt)("strong",{parentName:"h3"},"\u8bbf\u95ee Refs")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},"const node = this.myRef.current;\n")),(0,l.kt)("p",null,"ref \u7684\u503c\u6839\u636e\u8282\u70b9\u7684\u7c7b\u578b\u800c\u6709\u6240\u4e0d\u540c"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u5f53 ",(0,l.kt)("inlineCode",{parentName:"li"},"ref")," \u5c5e\u6027\u7528\u4e8e HTML \u5143\u7d20\u65f6\uff0c\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"React.createRef()")," \u521b\u5efa\u7684 ",(0,l.kt)("inlineCode",{parentName:"li"},"ref")," \u63a5\u6536\u5e95\u5c42 DOM \u5143\u7d20\u4f5c\u4e3a\u5176 ",(0,l.kt)("inlineCode",{parentName:"li"},"current")," \u5c5e\u6027",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"React \u4f1a\u5728\u7ec4\u4ef6\u6302\u8f7d\u65f6\u7ed9 ",(0,l.kt)("inlineCode",{parentName:"li"},"current")," \u5c5e\u6027\u4f20\u5165 DOM \u5143\u7d20\uff0c"),(0,l.kt)("li",{parentName:"ul"},"\u5728\u7ec4\u4ef6\u5378\u8f7d\u65f6\u4f20\u5165 ",(0,l.kt)("inlineCode",{parentName:"li"},"null")," \u503c"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ref")," \u4f1a\u5728 ",(0,l.kt)("inlineCode",{parentName:"li"},"componentDidMount")," \u6216 ",(0,l.kt)("inlineCode",{parentName:"li"},"componentDidUpdate")," \u751f\u547d\u5468\u671f\u94a9\u5b50\u89e6\u53d1\u524d\u66f4\u65b0"))),(0,l.kt)("li",{parentName:"ul"},"\u5f53 ",(0,l.kt)("inlineCode",{parentName:"li"},"ref")," \u5c5e\u6027\u7528\u4e8e\u81ea\u5b9a\u4e49 class \u7ec4\u4ef6\u65f6\uff0c",(0,l.kt)("inlineCode",{parentName:"li"},"ref")," \u5bf9\u8c61\u63a5\u6536\u7ec4\u4ef6\u7684\u6302\u8f7d\u5b9e\u4f8b\u4f5c\u4e3a\u5176 ",(0,l.kt)("inlineCode",{parentName:"li"},"current")," \u5c5e\u6027",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u7528 ref \u6765\u83b7\u53d6\u7ec4\u4ef6"))),(0,l.kt)("li",{parentName:"ul"},"\u4f60\u4e0d\u80fd\u5728\u51fd\u6570\u7ec4\u4ef6\u4e0a\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"ref")," \u5c5e\u6027\uff0c\u56e0\u4e3a\u4ed6\u4eec\u6ca1\u6709\u5b9e\u4f8b","  \u53ef\u4ee5\u5728\u51fd\u6570\u7ec4\u4ef6\u5185\u90e8\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"ref")," \u5c5e\u6027\u6307\u5411\u4e00\u4e2a DOM \u5143\u7d20\u6216 class \u7ec4\u4ef6",(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},'function CustomTextInput(props) {\n  // \u8fd9\u91cc\u5fc5\u987b\u58f0\u660e textInput\uff0c\u8fd9\u6837 ref \u624d\u53ef\u4ee5\u5f15\u7528\u5b83\n  const textInput = useRef(null);\n  function handleClick() {\n    textInput.current.focus();\n  }\n  return (\n    <div>\n      <input type="text" ref={textInput} />\n      <input type="button" value="Focus the text input" onClick={handleClick} />\n    </div>\n  );\n}\n')))),(0,l.kt)("h3",{id:"\u5b50\u7ec4\u4ef6-dom-refs-\u66b4\u9732\u7ed9\u7236\u7ec4\u4ef6"},(0,l.kt)("strong",{parentName:"h3"},"\u5b50\u7ec4\u4ef6 DOM Refs \u66b4\u9732\u7ed9\u7236\u7ec4\u4ef6")),(0,l.kt)("p",null,"\u89e6\u53d1\u7126\u70b9\u6216\u6d4b\u91cf\u5b50 DOM \u8282\u70b9\u7684\u5927\u5c0f\u6216\u4f4d\u7f6e"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("a",{parentName:"li",href:"https://zh-hans.reactjs.org/docs/forwarding-refs.html"},"ref \u8f6c\u53d1"),"  \u66f4\u5c0f\u529b\u5ea6\u5c01\u88c5\u7ec4\u4ef6",(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},(0,l.kt)("inlineCode",{parentName:"p"},"React.forwardRef")," \u5305\u88f9\u5b50\u7ec4\u4ef6 ",(0,l.kt)("inlineCode",{parentName:"p"},"Render")," \u65b9\u6cd5")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u7236\u7ec4\u4ef6\u521b\u5efa ",(0,l.kt)("inlineCode",{parentName:"p"},"refs")," \u4f20\u5165\u5b50\u7ec4\u4ef6 ",(0,l.kt)("inlineCode",{parentName:"p"},"ref")," \u5c5e\u6027")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u53ef\u4ee5\u8f6c\u53d1 ",(0,l.kt)("inlineCode",{parentName:"p"},"refs")," \u5230 ",(0,l.kt)("inlineCode",{parentName:"p"},"class")," \u7ec4\u4ef6\u5b9e\u4f8b"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},'const FancyButton = React.forwardRef((props, ref) => (\n  <button ref={ref} className="FancyButton">\n    {props.children}\n  </button>\n));\n\n// \u4f60\u53ef\u4ee5\u76f4\u63a5\u83b7\u53d6 DOM button \u7684 ref\uff1a\nconst ref = React.createRef();\n<FancyButton ref={ref}>Click me!</FancyButton>;\n'))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u5728\u9ad8\u9636\u7ec4\u4ef6\u4e2d\u8f6c\u53d1 refs"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"HOC \u6dfb\u52a0 ref\uff0c\u8be5 ref \u5c06\u5f15\u7528\u6700\u5916\u5c42\u7684\u5bb9\u5668\u7ec4\u4ef6"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},'function logProps(Component) {\n  class LogProps extends React.Component {\n    componentDidUpdate(prevProps) {\n      console.log("old props:", prevProps);\n      console.log("new props:", this.props);\n    }\n\n    render() {\n      const { forwardedRef, ...rest } = this.props;\n      // \u5c06\u81ea\u5b9a\u4e49\u7684 prop \u5c5e\u6027 \u201cforwardedRef\u201d \u5b9a\u4e49\u4e3a ref\n      return <Component ref={forwardedRef} {...rest} />;\n    }\n  }\n\n  // \u6ce8\u610f React.forwardRef \u56de\u8c03\u7684\u7b2c\u4e8c\u4e2a\u53c2\u6570 \u201cref\u201d\u3002\n  // \u6211\u4eec\u53ef\u4ee5\u5c06\u5176\u4f5c\u4e3a\u5e38\u89c4 prop \u5c5e\u6027\u4f20\u9012\u7ed9 LogProps\uff0c\u4f8b\u5982 \u201cforwardedRef\u201d\n  // \u7136\u540e\u5b83\u5c31\u53ef\u4ee5\u88ab\u6302\u8f7d\u5230\u88ab LogProps \u5305\u88f9\u7684\u5b50\u7ec4\u4ef6\u4e0a\u3002\n  return React.forwardRef((props, ref) => {\n    return <LogProps {...props} forwardedRef={ref} />;\n  });\n}\n')),(0,l.kt)("p",{parentName:"li"},"\u5728 DevTools \u4e2d\u663e\u793a\u81ea\u5b9a\u4e49\u540d\u79f0")),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"\u51fd\u6570\u7ec4\u4ef6\u547d\u540drender\u51fd\u6570"),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},"const WrappedComponent = React.forwardRef(function myFunction(props, ref) {\n  return <LogProps {...props} forwardedRef={ref} />;\n});\n"))),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("p",{parentName:"li"},"class\u7ec4\u4ef6\u4f7f\u7528",(0,l.kt)("inlineCode",{parentName:"p"},"displayName")),(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},"function logProps(Component) {\n  class LogProps extends React.Component {\n    // ...\n  }\n  function forwardRef(props, ref) {\n    return <LogProps {...props} forwardedRef={ref} />;\n  }\n  // \u5728 DevTools \u4e2d\u4e3a\u8be5\u7ec4\u4ef6\u63d0\u4f9b\u4e00\u4e2a\u66f4\u6709\u7528\u7684\u663e\u793a\u540d\u3002\n  // \u4f8b\u5982 \u201cForwardRef(logProps(MyComponent))\u201d\n  const name = Component.displayName || Component.name;\n  forwardRef.displayName = `logProps(${name})`;\n  return React.forwardRef(forwardRef);\n}\n"))))))),(0,l.kt)("li",{parentName:"ul"},"\u6bd4 ",(0,l.kt)("inlineCode",{parentName:"li"},"ref")," \u8f6c\u53d1\u66f4\u9ad8\u7684\u7075\u6d3b\u6027","  \u901a\u8fc7 ",(0,l.kt)("inlineCode",{parentName:"li"},"props")," \u660e\u6587\u4f20\u9012 ",(0,l.kt)("inlineCode",{parentName:"li"},"ref")," \u7ed9\u5b50\u7ec4\u4ef6\u7684 ",(0,l.kt)("inlineCode",{parentName:"li"},"ref")," \u5c5e\u6027",(0,l.kt)("pre",{parentName:"li"},(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},"function CustomTextInput(props) {\n  return (\n    <div>\n      <input ref={props.inputRef} />\n    </div>\n  );\n}\n\nclass Parent extends React.Component {\n  constructor(props) {\n    super(props);\n    this.inputElement = React.createRef();\n  }\n  render() {\n    return <CustomTextInput inputRef={this.inputElement} />;\n  }\n}\n"))),(0,l.kt)("li",{parentName:"ul"},"\u5b50\u7ec4\u4ef6\u7684\u5b9e\u73b0\u6ca1\u6709\u63a7\u5236\u6743\u4f7f\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"[findDOMNode()](https://zh-hans.reactjs.org/docs/react-dom.html#finddomnode)"),(0,l.kt)("ul",{parentName:"li"},(0,l.kt)("li",{parentName:"ul"},"\u53c2\u6570\u662fDOM\u8282\u70b9\u6216\u8005React\u5143\u7d20 ",(0,l.kt)("inlineCode",{parentName:"li"},"refs")),(0,l.kt)("li",{parentName:"ul"},"\u83b7\u53d6\u8868\u5355\u5b57\u6bb5\u7684\u503c\u6216\u8005\u6267\u884c DOM \u68c0\u6d4b\u7ec4\u4ef6\u6e32\u67d3\u7684\u5185\u5bb9\u4e3a ",(0,l.kt)("inlineCode",{parentName:"li"},"null")," \u6216 ",(0,l.kt)("inlineCode",{parentName:"li"},"false")," \u65f6\uff0c",(0,l.kt)("inlineCode",{parentName:"li"},"findDOMNode")," \u8fd4\u56de ",(0,l.kt)("inlineCode",{parentName:"li"},"null")),(0,l.kt)("li",{parentName:"ul"},"\u7ec4\u4ef6\u6e32\u67d3\u7684\u662f\u5b57\u7b26\u4e32\u65f6\uff0c",(0,l.kt)("inlineCode",{parentName:"li"},"findDOMNode")," \u8fd4\u56de\u7684\u662f\u5b57\u7b26\u4e32\u5bf9\u5e94\u7684 DOM \u8282\u70b9"),(0,l.kt)("li",{parentName:"ul"},"\u7ec4\u4ef6\u8fd4\u56de\u6709\u591a\u4e2a\u5b50\u8282\u70b9\u7684 fragment\uff0c",(0,l.kt)("inlineCode",{parentName:"li"},"findDOMNode")," \u4f1a\u8fd4\u56de\u7b2c\u4e00\u4e2a\u975e\u7a7a\u5b50\u8282\u70b9\u5bf9\u5e94\u7684 DOM \u8282\u70b9"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"findDOMNode")," \u53ea\u5728\u5df2\u6302\u8f7d\u7684\u7ec4\u4ef6\u4e0a\u53ef\u7528\uff08\u5373\uff0c\u5df2\u7ecf\u653e\u7f6e\u5728 DOM \u4e2d\u7684\u7ec4\u4ef6\uff09"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"findDOMNode")," \u4e0d\u80fd\u7528\u4e8e\u51fd\u6570\u7ec4\u4ef6")))),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},"ReactDOM.findDOMNode(component)\n")),(0,l.kt)("h3",{id:"\u56de\u8c03-refs"},"\u56de\u8c03 Refs"),(0,l.kt)("p",null,"\u7cbe\u7ec6\u5730\u63a7\u5236\u4f55\u65f6 refs \u88ab\u8bbe\u7f6e\u548c\u89e3\u9664"),(0,l.kt)("ul",null,(0,l.kt)("li",{parentName:"ul"},"\u7236\u7ec4\u4ef6\u4f20\u9012\u4e00\u4e2a\u56de\u8c03\u51fd\u6570\u7ed9\u5b50\u7ec4\u4ef6 ",(0,l.kt)("inlineCode",{parentName:"li"},"ref")," \u5c5e\u6027"),(0,l.kt)("li",{parentName:"ul"},"\u51fd\u6570\u53c2\u6570\u662fReact \u7ec4\u4ef6\u5b9e\u4f8b\u6216 HTML DOM \u5143\u7d20"),(0,l.kt)("li",{parentName:"ul"},"\u8d4b\u503c\u7ed9\u7ec4\u4ef6\u5b9e\u4f8b\u5c5e\u6027"),(0,l.kt)("li",{parentName:"ul"},"React \u5c06\u5728\u7ec4\u4ef6\u6302\u8f7d\u65f6\uff0c\u4f1a\u8c03\u7528 ",(0,l.kt)("inlineCode",{parentName:"li"},"ref")," \u56de\u8c03\u51fd\u6570\u5e76\u4f20\u5165 DOM \u5143\u7d20\uff0c"),(0,l.kt)("li",{parentName:"ul"},"\u5378\u8f7d\u65f6\u8c03\u7528\u5b83\u5e76\u4f20\u5165 ",(0,l.kt)("inlineCode",{parentName:"li"},"null")),(0,l.kt)("li",{parentName:"ul"},"\u5728 ",(0,l.kt)("inlineCode",{parentName:"li"},"componentDidMount")," \u6216 ",(0,l.kt)("inlineCode",{parentName:"li"},"componentDidUpdate")," \u89e6\u53d1\u524d\uff0cReact \u4f1a\u4fdd\u8bc1 refs \u4e00\u5b9a\u662f\u6700\u65b0\u7684"),(0,l.kt)("li",{parentName:"ul"},(0,l.kt)("inlineCode",{parentName:"li"},"ref")," \u56de\u8c03\u51fd\u6570\u662f\u4ee5\u5185\u8054\u51fd\u6570\u7684\u65b9\u5f0f\u5b9a\u4e49\u7684\uff0c\u5728\u66f4\u65b0\u8fc7\u7a0b\u4e2d\u5b83\u4f1a\u88ab\u6267\u884c\u4e24\u6b21")),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},'class CustomTextInput extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.textInput = null;\n    this.setTextInputRef = (element) => {\n      this.textInput = element;\n    };\n    this.focusTextInput = () => {\n      // \u4f7f\u7528\u539f\u751f DOM API \u4f7f text \u8f93\u5165\u6846\u83b7\u5f97\u7126\u70b9\n      if (this.textInput) this.textInput.focus();\n    };\n  }\n\n  componentDidMount() {\n    // \u7ec4\u4ef6\u6302\u8f7d\u540e\uff0c\u8ba9\u6587\u672c\u6846\u81ea\u52a8\u83b7\u5f97\u7126\u70b9\n    this.focusTextInput();\n  }\n\n  render() {\n    // \u4f7f\u7528 `ref` \u7684\u56de\u8c03\u51fd\u6570\u5c06 text \u8f93\u5165\u6846 DOM \u8282\u70b9\u7684\u5f15\u7528\u5b58\u50a8\u5230 React\n    // \u5b9e\u4f8b\u4e0a\uff08\u6bd4\u5982 this.textInput\uff09\n    return (\n      <div>\n        <input type="text" ref={this.setTextInputRef} />\n        <input\n          type="button"\n          value="Focus the text input"\n          onClick={this.focusTextInput}\n        />\n      </div>\n    );\n  }\n}\n')),(0,l.kt)("pre",null,(0,l.kt)("code",{parentName:"pre",className:"language-jsx"},"function CustomTextInput(props) {\n  return (\n    <div>\n      <input ref={props.inputRef} />\n    </div>\n  );\n}\nclass Parent extends React.Component {\n  render() {\n    return <CustomTextInput inputRef={(el) => (this.inputElement = el)} />;\n  }\n}\n")))}c.isMDXComponent=!0}}]);